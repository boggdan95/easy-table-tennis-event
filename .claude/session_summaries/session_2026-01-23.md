# Sesión 2026-01-23 - V2.2 Live Display

## Rama
`feature/v2.2-live-display`

## Completado

### UI Punto por Punto (`/mesa/{n}`)
- Botones +/- grandes y touch-friendly
- Colores distintivos (azul J1, verde J2)
- Animación flash al anotar punto
- Botones - para corregir (se habilitan cuando hay puntos)
- Bloqueo de puntos inválidos (ej: 12-7 no permitido)

### Reset de Puntos entre Sets
- Fix race condition: `savingSet` flag bloquea sync durante guardado
- Reload con cache-busting para obtener datos frescos

### Cambio de Lados
- Automático cada set (sets pares = invertido)
- Botón manual "Intercambiar lados" para ajustar posición física
- Preferencia guardada en localStorage por partido

### Historial de Sets
- Colores para cada jugador (azul/verde)
- Ganador en negrita
- Nombres removidos de botones (redundantes)

### Display Público (`/display`)
- Propiedad `full_name` agregada a PlayerORM
- Máximo 4 partidos en vivo
- Rotación automática de resultados/próximos cada 5s
- Responsive: 1080p, 4K
- Sin scroll (contenido fijo para TV)

### Traducciones
- `admin.referee.swap_sides`: "Intercambiar lados" / "Swap sides"
- Título cambiado a "Umpire Scoreboard" (EN)

### Infraestructura
- Regla firewall necesaria para acceso desde red local:
  ```
  netsh advfirewall firewall add rule name="ETTEM Server" dir=in action=allow protocol=TCP localport=8000
  ```

## Pendiente

1. `/admin/table-config` - Configurar mesas, cambiar modos, QR codes
2. Sistema de bloqueo - Probar 2 dispositivos en misma mesa
3. Walkover - Probar flujo completo
4. Sincronización display - Verificar puntos en tiempo real
5. Merge a main
6. Release v2.2.0

## Archivos Modificados
- `src/ettem/storage.py` - Agregado `full_name` property a PlayerORM
- `src/ettem/webapp/app.py` - Límites display, rotación contenido
- `src/ettem/webapp/templates/referee_scoreboard.html` - UI punto por punto completa
- `src/ettem/webapp/templates/public_display.html` - Responsive, sin scroll
- `i18n/strings_es.yaml` - swap_sides
- `i18n/strings_en.yaml` - swap_sides, Umpire

## Comando para Continuar
```bash
python -m uvicorn ettem.webapp.app:app --host 0.0.0.0 --port 8000 --reload
```
